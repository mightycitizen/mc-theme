{# twig-cs-fixer-disable-next-line #}
{#graphql
query($paragraph_id: ID!) {
  paragraph(id: $paragraph_id) {
    ... on ParagraphCtaBasic {
      id
      intro { ...Intro }
      media {
        ... on MediaImage {
          mediaImage {
            alt
            lg: variations(styles: HORIZONTAL53_LG) { url }
          }
        }
        ... on MediaRemoteVideo {
          mediaOembedVideo
        }
      }
      disclaimer {
        processed
      }
      link {
        text: title
        url
        internal
      }
    }
  }
}

fragment Intro on ParagraphIntro {
  id
  body {
    processed
  }
  heading
  label
  icon
  link {
    text: title
    url
    internal
  }
}
#}

{% set cta = graphql.paragraph %}

{% set intro %}
  {{ include('mc_theme:intro', {
    section_id: id,
    section_heading: cta.intro.heading,
    section_description: cta.intro.body.processed,
    section_label: {
      icon: cta.intro.icon ? mc_icon(cta.intro.icon) : NULL,
      text: cta.intro.label
    },
    section_button: cta.intro.link,
    section_button_tertiary: cta.link,
    divider: FALSE,
    intro_class: cta.media is empty ? 'text-center' : NULL,
    section_video: cta.media.mediaOembedVideo ? content.field_media.0 : NULL,
    section_image: cta.media.mediaImage ? {
      alt: cta.media.mediaImage.alt,
      src: cta.media.mediaImage.lg.0.url,
    } : NULL,
    section_disclaimer: cta.disclaimer.processed,
  }) }}
{% endset %}

{% block content %}
  {{ include('mc_theme:cta', {
    intro,
  }) }}
{% endblock %}
